<!DOCTYPE html>
<html lang="fr" data-theme="light" data-mode="auto">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta http-equiv="X-UA-Compatible" content="ie=edge"/>
    <title>Nouvelle annonce - LeBonChar</title>
    <link rel="stylesheet" href="/css/main.css"/>
    <link rel="icon shortcut" href="/images/logo.png"/>
</head>
<body>
    <div class="container">
        <h1 class="page-title">Créer une nouvelle annonce</h1>

        <div class="nav">
            <a href="javascript:history.back()" class="btn btn-back">
                <svg width="20" height="20" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="none">
                    <path
                        d="M19 12H5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path
                        d="M12 19L5 12L12 5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                Retour
            </a>
            <a href="/" class="btn btn-home">
                <svg width="20" height="20" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="none">
                    <path
                        d="M12.2796 3.71579C12.097 3.66261 11.903 3.66261 11.7203 3.71579C11.6678 3.7311 11.5754 3.7694 11.3789 3.91817C11.1723 4.07463 10.9193 4.29855 10.5251 4.64896L5.28544 9.3064C4.64309 9.87739 4.46099 10.0496 4.33439 10.24C4.21261 10.4232 4.12189 10.6252 4.06588 10.8379C4.00765 11.0591 3.99995 11.3095 3.99995 12.169V17.17C3.99995 18.041 4.00076 18.6331 4.03874 19.0905C4.07573 19.536 4.14275 19.7634 4.22513 19.9219C4.41488 20.2872 4.71272 20.5851 5.07801 20.7748C5.23658 20.8572 5.46397 20.9242 5.90941 20.9612C6.36681 20.9992 6.95893 21 7.82995 21H7.99995V18C7.99995 15.7909 9.79081 14 12 14C14.2091 14 16 15.7909 16 18V21H16.17C17.041 21 17.6331 20.9992 18.0905 20.9612C18.5359 20.9242 18.7633 20.8572 18.9219 20.7748C19.2872 20.5851 19.585 20.2872 19.7748 19.9219C19.8572 19.7634 19.9242 19.536 19.9612 19.0905C19.9991 18.6331 20 18.041 20 17.17V12.169C20 11.3095 19.9923 11.0591 19.934 10.8379C19.878 10.6252 19.7873 10.4232 19.6655 10.24C19.5389 10.0496 19.3568 9.87739 18.7145 9.3064L13.4748 4.64896C13.0806 4.29855 12.8276 4.07463 12.621 3.91817C12.4245 3.7694 12.3321 3.7311 12.2796 3.71579ZM11.1611 1.79556C11.709 1.63602 12.2909 1.63602 12.8388 1.79556C13.2189 1.90627 13.5341 2.10095 13.8282 2.32363C14.1052 2.53335 14.4172 2.81064 14.7764 3.12995L20.0432 7.81159C20.0716 7.83679 20.0995 7.86165 20.1272 7.88619C20.6489 8.34941 21.0429 8.69935 21.3311 9.13277C21.5746 9.49916 21.7561 9.90321 21.8681 10.3287C22.0006 10.832 22.0004 11.359 22 12.0566C22 12.0936 22 12.131 22 12.169V17.212C22 18.0305 22 18.7061 21.9543 19.2561C21.9069 19.8274 21.805 20.3523 21.5496 20.8439C21.1701 21.5745 20.5744 22.1701 19.8439 22.5496C19.3522 22.805 18.8274 22.9069 18.256 22.9543C17.706 23 17.0305 23 16.2119 23H15.805C15.7972 23 15.7894 23 15.7814 23C15.6603 23 15.5157 23.0001 15.3883 22.9895C15.2406 22.9773 15.0292 22.9458 14.8085 22.8311C14.5345 22.6888 14.3111 22.4654 14.1688 22.1915C14.0542 21.9707 14.0227 21.7593 14.0104 21.6116C13.9998 21.4843 13.9999 21.3396 13.9999 21.2185L14 18C14 16.8954 13.1045 16 12 16C10.8954 16 9.99995 16.8954 9.99995 18L9.99996 21.2185C10 21.3396 10.0001 21.4843 9.98949 21.6116C9.97722 21.7593 9.94572 21.9707 9.83107 22.1915C9.68876 22.4654 9.46538 22.6888 9.19142 22.8311C8.9707 22.9458 8.75929 22.9773 8.6116 22.9895C8.48423 23.0001 8.33959 23 8.21847 23C8.21053 23 8.20268 23 8.19495 23H7.78798C6.96944 23 6.29389 23 5.74388 22.9543C5.17253 22.9069 4.64769 22.805 4.15605 22.5496C3.42548 22.1701 2.8298 21.5745 2.4503 20.8439C2.19492 20.3523 2.09305 19.8274 2.0456 19.2561C1.99993 18.7061 1.99994 18.0305 1.99995 17.212L1.99995 12.169C1.99995 12.131 1.99993 12.0936 1.99992 12.0566C1.99955 11.359 1.99928 10.832 2.1318 10.3287C2.24383 9.90321 2.42528 9.49916 2.66884 9.13277C2.95696 8.69935 3.35105 8.34941 3.87272 7.8862C3.90036 7.86165 3.92835 7.83679 3.95671 7.81159L9.22354 3.12996C9.58274 2.81064 9.89467 2.53335 10.1717 2.32363C10.4658 2.10095 10.781 1.90627 11.1611 1.79556Z"
                        fill="currentColor"
                        fill-rule="evenodd"
                        clip-rule="evenodd"
                    />
                </svg>
                Accueil
            </a>
            <a href="/vendre" class="btn btn-home">
                <svg width="20" height="20" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="none">
                    <path
                        d="M8.00005 9C8.55233 9 9.00005 8.55228 9.00005 8C9.00005 7.44772 8.55233 7 8.00005 7C7.44776 7 7.00005 7.44772 7.00005 8C7.00005 8.55228 7.44776 9 8.00005 9Z"
                        fill="currentColor"
                    />
                    <path
                        d="M12.1635 2.05864C11.6504 1.962 11.1228 2.00288 10.4302 2.05655L7.49854 2.2821C6.80865 2.33516 6.23449 2.37931 5.76481 2.4522C5.27385 2.52839 4.82331 2.64559 4.39819 2.88284C3.76237 3.23769 3.23773 3.76232 2.88289 4.39814C2.64563 4.82326 2.52844 5.2738 2.45225 5.76476C2.37936 6.23444 2.3352 6.8086 2.28214 7.49849L2.05659 10.4301C2.00292 11.1228 1.96204 11.6504 2.05869 12.1635C2.14036 12.597 2.2945 13.0137 2.51464 13.396C2.77515 13.8484 3.14954 14.2224 3.64107 14.7134L8.65467 19.7269C9.16802 20.2403 9.59268 20.665 9.96589 20.9856C10.3535 21.3187 10.7457 21.5938 11.2112 21.7632C12.0788 22.0789 13.0298 22.0789 13.8974 21.7632C14.3629 21.5938 14.7551 21.3187 15.1427 20.9856C15.5159 20.665 15.9406 20.2403 16.4539 19.7269L19.727 16.4539C20.2403 15.9405 20.665 15.5158 20.9857 15.1426C21.3187 14.755 21.5938 14.3628 21.7632 13.8973C22.079 13.0298 22.079 12.0787 21.7632 11.2112C21.5938 10.7457 21.3187 10.3535 20.9857 9.96584C20.665 9.59262 20.2403 9.16794 19.7269 8.65458L14.7134 3.64103C14.2225 3.1495 13.8485 2.7751 13.396 2.51459C13.0137 2.29445 12.597 2.14031 12.1635 2.05864ZM10.4701 4.05943C11.327 3.99351 11.5732 3.98263 11.7933 4.02408C12.006 4.06415 12.2105 4.13978 12.3981 4.2478C12.5921 4.35952 12.772 4.52802 13.3797 5.13578L18.2859 10.042C18.8329 10.589 19.2033 10.9603 19.4687 11.2692C19.7274 11.5702 19.8313 11.751 19.8838 11.8952C20.0388 12.3209 20.0388 12.7876 19.8838 13.2133C19.8313 13.3575 19.7274 13.5382 19.4687 13.8393C19.2033 14.1482 18.8329 14.5195 18.2859 15.0665L15.0666 18.2859C14.5196 18.8328 14.1482 19.2032 13.8393 19.4687C13.5383 19.7273 13.3575 19.8313 13.2133 19.8838C12.7876 20.0387 12.321 20.0387 11.8953 19.8838C11.751 19.8313 11.5703 19.7273 11.2693 19.4687C10.9603 19.2032 10.589 18.8328 10.042 18.2859L5.13583 13.3797C4.52807 12.7719 4.35957 12.592 4.24785 12.398C4.13983 12.2104 4.0642 12.006 4.02412 11.7932C3.98268 11.5732 3.99356 11.327 4.05948 10.47L4.27333 7.68986C4.33007 6.95232 4.36897 6.45566 4.42859 6.07147C4.48624 5.69996 4.55341 5.50883 4.62932 5.37281C4.80344 5.06082 5.06087 4.80339 5.37286 4.62928C5.50888 4.55336 5.7 4.4862 6.07151 4.42854C6.45571 4.36892 6.95237 4.33002 7.6899 4.27329L10.4701 4.05943Z"
                        fill="currentColor"
                        fill-rule="evenodd"
                        clip-rule="evenodd"
                    />
                </svg>
                Mes annonces
            </a>
        </div>

        <?php require_once '../app/vues/composants/messages.php'; ?>

        <!-- Formulaire de création -->
        <div class="card">
            <div class="card-content">
                <form action="/annonce/nouveau" method="POST" class="form" enctype="multipart/form-data">

                    <!-- Informations générales -->
                    <h2 class="form-title">Informations générales</h2>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--space-lg);">
                        <div class="form-group">
                            <label for="titre">Titre :</label>
                            <input type="text" id="titre" name="titre" placeholder="Un titre attractif pour votre annonce" required>
                        </div>
                        <div class="form-group">
                            <label for="prix">Prix :</label>
                            <input type="number" id="prix" name="prix" step="0.01" placeholder="Prix en euros" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="description">Description :</label>
                        <textarea id="description" name="description" placeholder="Décrivez votre véhicule, son état, ses points forts..." rows="6" required></textarea>
                    </div>

                    <!-- Caractéristiques principales -->
                    <h2 class="form-title mt-lg">Caractéristiques principales</h2>
                    <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: var(--space-md);">
                        <div class="form-group">
                            <label for="annee">Année :</label>
                            <input type="number" id="annee" name="annee" min="1900" max="<?= date('Y'); ?>" placeholder="<?= date('Y'); ?>" required>
                        </div>
                        <div class="form-group">
                            <label for="kilometrage">Kilométrage :</label>
                            <input type="number" id="kilometrage" name="kilometrage" placeholder="En kilomètres" required>
                        </div>
                        <div class="form-group">
                            <label for="categorie">Catégorie :</label>
                            <select id="categorie" name="categorie">
                                <option value="">Sélectionnez une catégorie</option>
                                <option value="Berline">Berline</option>
                                <option value="SUV">SUV</option>
                                <option value="Citadine">Citadine</option>
                                <option value="Break">Break</option>
                                <option value="Coupé">Coupé</option>
                                <option value="Cabriolet">Cabriolet</option>
                                <option value="Monospace">Monospace</option>
                                <option value="Utilitaire">Utilitaire</option>
                                <option value="Sport">Sport</option>
                                <option value="Autre">Autre</option>
                            </select>
                        </div>
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--space-md);">
                        <div class="form-group">
                            <label for="couleur">Couleur :</label>
                            <input type="text" id="couleur" name="couleur" placeholder="Ex: Noir, Blanc, Rouge..." required>
                        </div>
                        <div class="form-group">
                            <label for="energie">Énergie :</label>
                            <select id="energie" name="energie" required>
                                <option value="">Sélectionnez une énergie</option>
                                <option value="Essence">Essence</option>
                                <option value="Diesel">Diesel</option>
                                <option value="Hybride">Hybride</option>
                                <option value="Électrique">Électrique</option>
                                <option value="GPL">GPL</option>
                                <option value="Bioéthanol">Bioéthanol</option>
                                <option value="Autre">Autre</option>
                            </select>
                        </div>
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--space-md);">
                        <div class="form-group">
                            <label for="marque_id">Marque :</label>
                            <select id="marque_id" name="marque_id" onchange="nouvelleMarque()" required>
                                <option value="">Sélectionnez une marque</option>
                                <?php foreach ($marques as $marque): ?>
                                    <option value="<?= $marque['id']; ?>"><?= $marque['nom']; ?></option>
                                <?php endforeach; ?>
                                <option value="autre">Autre</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="modele">Modèle :</label>
                            <input type="text" id="modele" name="modele" placeholder="Exemple: Golf, Clio, 308..." required>
                        </div>
                    </div>

                    <div id="nouvelle_marque_container" class="form-group" style="display: none;">
                        <label for="nouvelle_marque">Nouvelle marque :</label>
                        <input type="text" id="nouvelle_marque" name="nouvelle_marque" placeholder="Saisissez le nom de la marque">
                    </div>

                    <!-- Caractéristiques techniques -->
                    <h2 class="form-title mt-lg">Caractéristiques techniques</h2>
                    <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: var(--space-md);">
                        <div class="form-group">
                            <label for="type">Type de boîte :</label>
                            <select id="type" name="type" required>
                                <option value="">Sélectionnez un type</option>
                                <option value="Manuelle">Manuelle</option>
                                <option value="Séquentielle">Séquentielle</option>
                                <option value="Automatique">Automatique</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="nombre_portes">Nombre de portes :</label>
                            <select id="nombre_portes" name="nombre_portes" required>
                                <option value="">Sélectionnez</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="nombre_places">Nombre de places :</label>
                            <select id="nombre_places" name="nombre_places" required>
                                <option value="">Sélectionnez</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                                <option value="7">7</option>
                                <option value="8">8</option>
                                <option value="9">9</option>
                            </select>
                        </div>
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--space-md);">
                        <div class="form-group">
                            <label for="sellerie">Sellerie :</label>
                            <select id="sellerie" name="sellerie" required>
                                <option value="">Sélectionnez</option>
                                <option value="Tissu">Tissu</option>
                                <option value="Cuir">Cuir</option>
                                <option value="Alcantara">Alcantara</option>
                                <option value="Mixte">Mixte</option>
                                <option value="Autre">Autre</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="consommation">Consommation (L/100km) :</label>
                            <input type="number" id="consommation" name="consommation" step="0.1" placeholder="Ex: 5.5" required>
                        </div>
                    </div>

                    <!-- Informations complémentaires -->
                    <h2 class="form-title mt-lg">Informations complémentaires</h2>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--space-md);">
                        <div class="form-group">
                            <label for="provenance">Provenance :</label>
                            <input type="text" id="provenance" name="provenance" placeholder="Ex: France, Allemagne..." required>
                        </div>
                        <div class="form-group">
                            <label for="mise_en_circulation">Mise en circulation :</label>
                            <input type="date" id="mise_en_circulation" name="mise_en_circulation" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="premiere_main">Première main :</label>
                        <select id="premiere_main" name="premiere_main" required>
                            <option value="">Sélectionnez</option>
                            <option value="oui">Oui</option>
                            <option value="non">Non</option>
                        </select>
                    </div>

                    <!-- Images -->
                    <h2 class="form-title mt-lg">Images du véhicule</h2>
                    <div class="car-image-upload">
                        <input type="file" id="image_voiture" name="image_voiture[]" accept=".jpg,.jpeg,.png,.webp" multiple required style="display: none;">
                        <label class="car-image-dropzone" for="image_voiture" onclick="event.stopPropagation();">
                            <svg width="48" height="48" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="none">
                                <path
                                    d="M4 16L8.58579 11.4142C9.36683 10.6332 10.6332 10.6332 11.4142 11.4142L16 16M14 14L15.5858 12.4142C16.3668 11.6332 17.6332 11.6332 18.4142 12.4142L20 14M14 8H14.01M6 20H18C19.1046 20 20 19.1046 20 18V6C20 4.89543 19.1046 4 18 4H6C4.89543 4 4 4.89543 4 6V18C4 19.1046 4.89543 20 6 20Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            <span>Ajouter des images (1 à 3)</span>
                            <p>Formats acceptés : JPG, PNG, WEBP</p>
                        </label>
                        <small class="form-help">Vous pouvez ajouter jusqu'à 3 images de bonne qualité pour mettre en valeur votre véhicule.</small>
                    </div>

                    <div class="file-preview" id="image-preview" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)); gap: var(--space-sm); margin-top: var(--space-md);"></div>

                    <!-- Boutons d'action -->
                    <div class="nav mt-lg">
                        <button type="submit" class="btn btn-primary">
                            <svg width="20" height="20" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="none">
                                <path
                                    d="M12 4C12.5523 4 13 4.44772 13 5V11H19C19.5523 11 20 11.4477 20 12C20 12.5523 19.5523 13 19 13H13V19C13 19.5523 12.5523 20 12 20C11.4477 20 11 19.5523 11 19V13H5C4.44772 13 4 12.5523 4 12C4 11.4477 4.44772 11 5 11H11V5C11 4.44772 11.4477 4 12 4Z"
                                    fill="currentColor"
                                />
                            </svg>
                            Créer l'annonce
                        </button>
                        <a href="/vendre" class="btn btn-home">Annuler</a>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script type="text/javascript" src="/js/utils.js"></script>
</body>
</html>